define(["jquery","bootstrap"],function(){(function(e){if(e.browser)return;e.browser={};e.browser.mozilla=false;e.browser.webkit=false;e.browser.opera=false;e.browser.msie=false;var t=navigator.userAgent;e.browser.name=navigator.appName;e.browser.fullVersion=""+parseFloat(navigator.appVersion);e.browser.majorVersion=parseInt(navigator.appVersion,10);var a,r,n;if((r=t.indexOf("Opera"))!=-1){e.browser.opera=true;e.browser.name="Opera";e.browser.fullVersion=t.substring(r+6);if((r=t.indexOf("Version"))!=-1)e.browser.fullVersion=t.substring(r+8)}else if((r=t.indexOf("MSIE"))!=-1){e.browser.msie=true;e.browser.name="Microsoft Internet Explorer";e.browser.fullVersion=t.substring(r+5)}else if((r=t.indexOf("Chrome"))!=-1){e.browser.webkit=true;e.browser.name="Chrome";e.browser.fullVersion=t.substring(r+7)}else if((r=t.indexOf("Safari"))!=-1){e.browser.webkit=true;e.browser.name="Safari";e.browser.fullVersion=t.substring(r+7);if((r=t.indexOf("Version"))!=-1)e.browser.fullVersion=t.substring(r+8)}else if((r=t.indexOf("Firefox"))!=-1){e.browser.mozilla=true;e.browser.name="Firefox";e.browser.fullVersion=t.substring(r+8)}else if((a=t.lastIndexOf(" ")+1)<(r=t.lastIndexOf("/"))){e.browser.name=t.substring(a,r);e.browser.fullVersion=t.substring(r+1);if(e.browser.name.toLowerCase()==e.browser.name.toUpperCase()){e.browser.name=navigator.appName}}if((n=e.browser.fullVersion.indexOf(";"))!=-1)e.browser.fullVersion=e.browser.fullVersion.substring(0,n);if((n=e.browser.fullVersion.indexOf(" "))!=-1)e.browser.fullVersion=e.browser.fullVersion.substring(0,n);e.browser.majorVersion=parseInt(""+e.browser.fullVersion,10);if(isNaN(e.browser.majorVersion)){e.browser.fullVersion=""+parseFloat(navigator.appVersion);e.browser.majorVersion=parseInt(navigator.appVersion,10)}e.browser.version=e.browser.majorVersion})(jQuery);var base={};base.$scope={};base.IE8=function(){if(!$.support.opacity){return true}else{return false}};base.IE=function(){if(!$.support.opacity&&!$.support.style&&window.XMLHttpRequest==undefined){return 6}else{if(!$.support.opacity&&!$.support.style&&window.window.XMLHttpRequest!=undefined){return 7}else{if(!$.support.opacity){return 8}else{return 9}}}}();base.isIE=function(){if(document.all){return true}else{return false}}();base.setProperty=function(e,t){if(t){if(t.cls){$(e).addClass(t.cls.replace(/,/g," "))}if(t.style){$(e).attr("style",t.style.replace(/,/g,";"))}if(t.id){$(e).attr("id",self.id)}if(t.name){$(e).attr("name",self.name)}}};base.getRandom=function(e,t){return Math.round(Math.random()*(t-e)+e)};base.ajax=function(e,t){var a={};t=t?t:true;if(e){a.params=e.params?e.params:{};a.url=e.url?e.url:"";a.async=e.async?e.async:true;a.type=e.type?e.type:"post";a.dataType=e.dataType?e.dataType:"json";a.success=e.success?e.success:null;a.error=e.error?e.error:null;a.beforeSend=e.beforeSend?e.beforeSend:null;a.complete=e.complete?e.complete:null;a.timeout=e.timeout?e.timeout:-1;a.ajaxObj=null;a.isConnect=a.isConnect?a.isConnect:true;a.contentType=e.contentType?e.contentType:"application/json; charset=utf-8";if(a.dataType=="text"){a.type="get"}a.connect=function(){a.ajaxObj=$.ajax({type:a.type,async:a.async,url:a.url,contentType:a.contentType,data:function(){if(a.type.toLowerCase()=="post"){return JSON.stringify(a.params)}else{return a.params}}(),dataType:a.dataType,timeout:a.timeout,success:function(e,t,r){if(a.success){a.success(e,t,r)}},error:function(e,t,r){if(a.error){a.error()}},beforeSend:function(e){if(a.beforeSend){a.beforeSend(e)}},xhrFields:{withCredentials:true},complete:function(e,t){if(a.complete){a.complete()}}});return a};a.stop=function(){a.ajaxObj.abort()};a.run=function(){a.connect()};if(t){if(a.url){a.connect()}}return a}};base.ajax.load=function(e){var t=base.ajax(e,false);t.dataType="text";t.type="get";t.errorText=e.errorText?e.errorText:"资源加载出错,请联系管理员!";t.container=e.container?e.container:null;t.error=function(){if(t.container){base.bulletin(t.container,t.errorText)}};t.beforeSend=function(){if(t.container){base.loading($(t.container))}};if(!t.url){base.bulletin(t.container,t.errorText)}else{t.connect()}return t};base.bulletin=function(e,t){$(e).html("<div style='display:table;width:100%;height:100%;text-align:center;'><div class='theme-bulletin'>"+t+"</div></div>")};base.loading=function(e){$(e).html("<div style='display:table;width:100%;height:100%;text-align:center;'>"+"<i class='fa fa-spinner fa-pulse fa-3x fa-fw' style='font-size:24px;text-align:center;display: table-cell;vertical-align: middle;width:24px;height:24px;color:#aaa'></i></div>")};base.template=function(e){var t={};t.data=e.data?e.data:null;t.container=e.container?e.container:null;t.templateId=e.templateId?e.templateId:null;t.callback=e.callback?e.callback:null;t.loading=e.loading?e.loading:false;t.helper=e.helper?e.helper:null;if(t.data&&t.container&&t.templateId){if(t.loading){base.loading(t.container)}require(["template"],function(e){var a=e.compile($("#"+t.templateId).html());e.registerHelper("null",function(e,t){if(!e||e==""){return t.fn(this)}else{return t.inverse(this)}});e.registerHelper("ne",function(e,t,a){if(e!=t){return a.fn(this)}else{return a.inverse(this)}});e.registerHelper("e",function(e,t,a){if(e==t){return a.fn(this)}else{return a.inverse(this)}});e.registerHelper("g",function(e,t,a){if(e>t){return a.fn(this)}else{return a.inverse(this)}});e.registerHelper("ge",function(e,t,a){if(e>=t){return a.fn(this)}else{return a.inverse(this)}});e.registerHelper("le",function(e,t,a){if(e<=t){return a.fn(this)}else{return a.inverse(this)}});e.registerHelper("l",function(e,t,a){if(e<t){return a.fn(this)}else{return a.inverse(this)}});if(t.helper&&t.helper.length>0){$(t.helper).each(function(t,a){e.registerHelper(a.name,a.event)})}var r=a(t.data);$(t.container).html(r);if(t.callback){t.callback(t)}})}};base.modal=function(e){if(!e){e={}}var t={};t.container=e.container?e.container:$("body");t.modalId=e.id?e.id:"m"+base.getRandom(1e3,9999);t.label=e.label?e.label:"新窗口";t.background=e.background?e.background:"#fff";t.modalLabelId=e.id+"label";t.style=e.style?e.style:"";t.width=e.width?e.width:null;t.visible=e.visible?e.visible:false;t.center=e.center?e.center:true;t.drag=e.drag?e.drag:false;t.url=e.url?e.url:null;t.height=e.height?e.height:null;t.radius=e.radius?e.radius:5;t.contentStyle=e.contentStyle?e.contentStyle:"";t.labelStyle=e.labelStyle?e.labelStyle:"";t.modalEntity={};t.modal=null;t.modalBody=null;t.modalDialog=null;t.modalContent=null;t.modalHeader=null;t.modalFooter=null;t.callback=e.callback?e.callback:null;t.customScroll=e.customScroll?e.customScroll:true;t.context=e.context?e.context:"";t.drag=e.drag?e.drag:false;t.rebuilding=e.rebuilding?e.rebuilding:false;t.create=function(){if($("#"+t.modalId).length>0){if(t.rebuilding){$("#"+t.modalId).remove();t.createModal()}else{t.modal=$("#"+t.modalId);t.setModal();t.modalDialog=$("#"+t.modalId).find(".modal-dialog");t.setModalDialog();t.modalContent=$("#"+t.modalId).find(".modal-content");t.setModalContent();t.modalHeader=$("#"+t.modalId).find(".modal-header");t.setModalHeader();t.modalBody=$("#"+t.modalId).find(".modal-body");t.setModalBody();t.modalFooter=$("#"+t.modalId).find(".modal-footer");t.setModalFooter()}}else{t.createModal()}if(!t.visible){t.show()}};t.createModal=function(){t.modal=document.createElement("div");$(t.container).append(t.modal);t.setModal();t.modalDialog=document.createElement("div");$(t.modal).append(t.modalDialog);t.setModalDialog();t.modalContent=document.createElement("div");$(t.modalDialog).append(t.modalContent);t.setModalContent();t.modalHeader=document.createElement("div");$(t.modalContent).append(t.modalHeader);t.setModalHeader();t.modalBody=document.createElement("div");$(t.modalContent).append(t.modalBody);t.setModalBody();t.modalFooter=document.createElement("div");$(t.modalContent).append(t.modalFooter);t.setModalFooter()};t.setModal=function(){$(t.modal).attr("id",t.modalId);$(t.modal).attr("class","modal fade");$(t.modal).attr("role","dialog");$(t.modal).attr("tabindex","-1");$(t.modal).attr("aria-labelledby",t.modalId+"Label");if(t.visible){$(t.modal).attr("aria-hidden","true")}else{$(t.modal).attr("aria-hidden","false")}if(t.cls){$(t.modal).attr("class",e.cls.replace(/,/g," "))}if(t.style){$(t.modal).attr("style",e.style.replace(/,/g,";"))}};t.setModalDialog=function(){$(t.modalDialog).attr("class","modal-dialog");if(t.width){$(t.modalDialog).css("width",t.width)}if(t.background){$(t.modalDialog).css("background",t.background)}$(t.modalDialog).css("border-radius",t.radius)};t.setModalContent=function(){$(t.modalContent).attr("class","modal-content");$(t.modalContent).css("border","0");$(t.modalContent).css("border-radius",t.radius)};t.setModalHeader=function(){$(t.modalHeader).attr("class","modal-header");if(t.drag){require(["jqueryUI"],function(){$(t.modalDialog).draggable({handle:".modal-header",cursor:"move",refreshPositions:false});$(t.modalHeader).css("cursor","move")})}$(t.modalHeader).html("<button class='close' data-dismiss='modal' aria-hidden='true'><i class='fa fa-remove' style='font-weight:normal;font-size:16px;'></i></button><h4 class='modal-title'  id='"+t.modalId+"Label'>"+t.label+"</h4>");if(t.labelStyle){$(t.modalHeader).find("h4").attr("style",t.labelStyle.replace(/,/g,";"))}};t.setModalBody=function(){$(t.modalBody).attr("class","modal-body");if(t.height&&t.height>0){$(t.modalBody).css("height",t.height);$(t.modalBody).css("overflow","auto")}if(t.contentStyle){$(t.modalBody).attr("style",t.contentStyle.replace(/,/g,";"))}};t.setModalFooter=function(){$(t.modalFooter).attr("class","modal-footer");$(t.modalFooter).html("");if(e.buttons&&e.buttons.length>0){$(e.buttons).each(function(e,a){a.container=$(t.modalFooter);base.form.button(a)})}};t.show=function(){$(t.modal).on("show.bs.modal",function(){t.loadContext();if(t.showEvent){t.showEvent()}});$(t.modal).on("shown.bs.modal",function(){if(t.shownEvent){t.shownEvent()}});$(t.modal).on("hidden.bs.modal",function(){$(t.modal).remove()});$(t.modal).modal({show:true,center:t.center})};t.hide=function(){$(t.modal).on("hide.bs.modal",function(){if(t.hideEvent){t.hideEvent()}});$(t.modal).on("hidden.bs.modal",function(){if(t.hiddenEvent){t.hiddenEvent()}$(t.modal).remove()});$(t.modal).modal("hide")};t.loadContext=function(a){if(!a){a=e}$(t.modalBody).html("");if(a.context){$(t.modalBody).html(a.context);if(t.callback){t.callback(t)}}else if(a.url){base.ajax({url:a.url,dataType:"text",success:function(e){$(t.modalBody).html(e);if(t.callback){t.callback(t)}if(t.customScroll){base.scroll({container:$(t.modalBody)})}},beforeSend:function(){base.loading(t.modalBody)}})}};t.create();return t};base.glass=function(e){if(base.isIE){if(base.IE<=8){return}}var t={};t.radius=e.radius?e.radius:15;t.element=e.element?e.element:null;t.canvas=null;t.img=e.img?e.img:null;var a=new Image;$(a).attr("src",$(t.img).attr("src"));t.fixHeight=e.fixHeight?e.fixHeight:0;t.width=a.width?a.width:$(t.element).width();t.height=a.height?a.height:$(t.element).height();t.top=e.top?e.top:$(t.element).offset().top;t.left=e.left?e.left:$(t.element).offset().left;t.x=e.x?e.x:0;t.y=e.y?e.y:0;t.cls=e.cls?e.cls:null;t.Mu=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259];t.Sh=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];t.BlurStack=function(){this.r=0;this.g=0;this.b=0;this.a=0;this.next=null};t.draw=function(){var e=$(t.element).width();var a=$(t.element).height();$(t.canvas).css("width",e);$(t.canvas).css("height",a);$(t.canvas).css("left",t.left);$(t.canvas).css("top",t.top);$(t.canvas).attr("width",e);$(t.canvas).attr("height",a);$(t.canvas).css("position","absolute");if(t.cls){$(t.canvas).addClass(t.cls)}var r=0;if($(t.element).css("z-index")){r=Number($(t.element).css("z-index").split("px")[0])}$(t.canvas).css("zIndex",r+1);var n=t.canvas.getContext("2d");n.clearRect(0,0,e,a);var o=0;if($(window).height()<document.documentElement.scrollHeight){o=a+Math.floor(window.screen.availHeight/t.height*a)+10}else{o=a+Math.floor(window.screen.availHeight/t.height*a)}var i=t.width;n.drawImage($(t.img)[0],t.left,t.top,i,o,t.x,t.y,e,a);t.stackBlurCanvasRGBA(0,0,e,a)};t.create=function(){t.canvas=document.createElement("canvas");$(t.element).parent().append(t.canvas);t.draw()};t.stackBlurCanvasRGBA=function(e,a,r,n){var o=t.canvas.getContext("2d");var i;try{try{i=o.getImageData(e,a,r,n)}catch(t){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");i=o.getImageData(e,a,r,n)}catch(e){throw new Error("unable to access local image data: "+e);return}}}catch(e){throw new Error("unable to access image data: "+e)}var l=i.data;var s,c,d,u,f,p,m,b,h,g,$,v,y,w,k,C,x,S,A,I,E,B,O,P;var T=t.radius+t.radius+1;var N=r<<2;var D=r-1;var j=n-1;var M=t.radius+1;var L=M*(M+1)/2;var z=new BlurStack;var F=z;for(d=1;d<T;d++){F=F.next=new BlurStack;if(d==M)var H=F}F.next=z;var G=null;var R=null;m=p=0;var V=mul_table[t.radius];var q=shg_table[t.radius];for(c=0;c<n;c++){C=x=S=A=b=h=g=$=0;v=M*(I=l[p]);y=M*(E=l[p+1]);w=M*(B=l[p+2]);k=M*(O=l[p+3]);b+=L*I;h+=L*E;g+=L*B;$+=L*O;F=z;for(d=0;d<M;d++){F.r=I;F.g=E;F.b=B;F.a=O;F=F.next}for(d=1;d<M;d++){u=p+((D<d?D:d)<<2);b+=(F.r=I=l[u])*(P=M-d);h+=(F.g=E=l[u+1])*P;g+=(F.b=B=l[u+2])*P;$+=(F.a=O=l[u+3])*P;C+=I;x+=E;S+=B;A+=O;F=F.next}G=z;R=H;for(s=0;s<r;s++){l[p+3]=O=$*V>>q;if(O!=0){O=255/O;l[p]=(b*V>>q)*O;l[p+1]=(h*V>>q)*O;l[p+2]=(g*V>>q)*O}else{l[p]=l[p+1]=l[p+2]=0}b-=v;h-=y;g-=w;$-=k;v-=G.r;y-=G.g;w-=G.b;k-=G.a;u=m+((u=s+t.radius+1)<D?u:D)<<2;C+=G.r=l[u];x+=G.g=l[u+1];S+=G.b=l[u+2];A+=G.a=l[u+3];b+=C;h+=x;g+=S;$+=A;G=G.next;v+=I=R.r;y+=E=R.g;w+=B=R.b;k+=O=R.a;C-=I;x-=E;S-=B;A-=O;R=R.next;p+=4}m+=r}for(s=0;s<r;s++){x=S=A=C=h=g=$=b=0;p=s<<2;v=M*(I=l[p]);y=M*(E=l[p+1]);w=M*(B=l[p+2]);k=M*(O=l[p+3]);b+=L*I;h+=L*E;g+=L*B;$+=L*O;F=z;for(d=0;d<M;d++){F.r=I;F.g=E;F.b=B;F.a=O;F=F.next}f=r;for(d=1;d<=t.radius;d++){p=f+s<<2;b+=(F.r=I=l[p])*(P=M-d);h+=(F.g=E=l[p+1])*P;g+=(F.b=B=l[p+2])*P;$+=(F.a=O=l[p+3])*P;C+=I;x+=E;S+=B;A+=O;F=F.next;if(d<j){f+=r}}p=s;G=z;R=H;for(c=0;c<n;c++){u=p<<2;l[u+3]=O=$*V>>q;if(O>0){O=255/O;l[u]=(b*V>>q)*O;l[u+1]=(h*V>>q)*O;l[u+2]=(g*V>>q)*O}else{l[u]=l[u+1]=l[u+2]=0}b-=v;h-=y;g-=w;$-=k;v-=G.r;y-=G.g;w-=G.b;k-=G.a;u=s+((u=c+M)<j?u:j)*r<<2;b+=C+=G.r=l[u];h+=x+=G.g=l[u+1];g+=S+=G.b=l[u+2];$+=A+=G.a=l[u+3];G=G.next;v+=I=R.r;y+=E=R.g;w+=B=R.b;k+=O=R.a;C-=I;x-=E;S-=B;A-=O;R=R.next;p+=r}}o.putImageData(i,e,a)};t.create();return t};base.spreader=function(e){var t={};t.container=e.container?e.container:null;t.data=e.data?e.data:null;t.step=e.step?e.step:0;t.mapOption=e.mapOption?e.mapOption:null;t.radius=e.radius?e.radius:.05;t.offset=e.offset?e.offset:10;t.origin=e.origin?e.origin:[0,0];t.mapData={type:"FeatureCollection",features:[],UTF8Encoding:true};t.markLineData=[];t.markPointData=[];t.geoCoord={};t.originId=null;t.element=null;t.isMain=e.isMain?e.isMain:true;t.create=function(){if(t.data&&t.data.length>0){if(t.isMain){t.element=t.container}else{t.element=document.createElement("div");$(t.container).append(t.element)}t.setData(t.data);t.draw()}return t};t.draw=function(){if(t.mapOption){var a=base.echartsOld({container:t.element,type:"map",style:"width:100%;height:100%",option:t.mapOption,mapData:t.mapData,mapName:"service",clickEvent:e.clickEvent?e.clickEvent:null,hoverEvent:e.hoverEvent?e.hoverEvent:null})}};t.getPosition=function(e,a,r,n){if(!e||!a||!r){return[]}var n=n?n:t.radius;var o=Number(e)+Math.sin(2*Math.PI/360*r)*n;var i=Number(a)+Math.cos(2*Math.PI/360*r)*n;var l=[o,i];return l};t.setData=function(e,a){$(e).each(function(r,n){var o=n.id;var i=[];var l=0;var s=0;if(a){if(a.cp[0]==t.origin[0]&&a.cp[1]==t.origin[1]){l=t.step>0?360/t.step*(r+1):360/e.length*(r+1);s=t.radius}else{var c=a.angle;l=c/1.5+10*(r+1);s=t.radius}i=t.getPosition(a.cp[0],a.cp[1],l,s)}else{i=t.origin}if(t.originId){t.originId=o}t.geoCoord[n.name]=i;if(a){t.markLineData.push([{name:n.name},{name:a.data.name,value:n.value}]);t.markPointData.push({name:n.name,value:n.value})}else{t.markLineData.push([{name:n.name},{name:t.data[0].name,value:n.value}])}var d={type:"Feature",id:o,properties:{name:n.name,cp:i,childNum:1},geometry:{type:"Polygon",coordinates:["@@DB@DF@@@B@@@@@@@B@B@@@@@@@@@@@D@BAB@@@B@B@@@B@B@BA@@B@B@@BD@@F@B@@@B@@@@@B@B@B@@@B@@@@@@@FD@@CA@@AD@BC@@@A@EB@@CD@@AB@B@R@@@@@@@@@@@@ED@@@@@D@@@@@B@@E@@@BA@@A@@@A@@@A@@@@@@@@@@@A@@@CB@@@@@@@@@@AA@@@@@@@@AF@B@@@B@@@@@@@@@@@@@@AB@@BD@@@@@@@@@A@@@@B@@AB@@@@B@@@@@FBBA@CD@@EAA@@@A@@@@@@B@@@@@@@@@@@BB@@@@B@@@@@@@B@D@@@@@@@@@@@@AB@@@A@@@@A@A@@@@@@@@A@@@AA@@@A@@@A@A@@@@@AA@@A@@@E@@@@@@@A@C@@@@@@@@@@@E@@@@CB@@@@A@@@@@A@AA@@@@@@@@@BA@@@A@@A@@@BE@@IBE@G@C@C@@@@BC@A@@@C@C@A@C@A@A@@B@@@@BB@@@B@B@@@B@B@@@B@B@B@B@B@@@D@@CA@C@@AB@@@@@@@@C@@@A@@@EH@@AD@@@@@@@@AC@@C@@A@A@AB@@@@A@@@A@@AC@@ABG@A@@@@BE@C@A@@@@@AAAAA@@@A@C@@@@@@AA@@@@@@C@KBO@C@@@C@A@@@A@AAA@@@E@@@E@@CD@@@@@@A@@@@@C@@@@B@@AA@@C@@@@@@A@@@A@BGA@@@@@A@@A@@@@@@C@C@CB@@@@C@@@A@@@A@A@@@@@A@@@@@A@@AI@@@B@A@@B@B@B@@@@@@@B@@A@@@@A@@AB@BA@A@@@@@@DE@@@@@@B@@@BEA@@A@A@AAA@A@@@@@A@@B@@@@A@@@@@A@@@@@@@@@B@@B@@@@B@@@@@@@@@B@@D@@@DJ@B@D@@@@@H@NB@B@B@@@L@@@B@@@BAH@J@J@F@@@@@@A@@@A@@@@B@@@@@D@B@JG@@BB@@B@@@@@DA@@@@@@B@@@@B@AD@@@@@B@NJ@@B@@@@@@@@@@@@F@AJ@@@@C@AX@@@@@@AB@@A@@F@N@NMA@F@B"],encodeOffsets:[[119181,40920]]}};t.mapData.features.push(d);if(n.items&&n.items.length>0){var u={cp:i,data:n,angle:l};t.setData(n.items,u)}});t.mapOption.series[0].geoCoord=t.geoCoord;t.mapOption.series[0].markLine.data=t.markLineData;t.mapOption.series[0].markPoint.data=t.markPointData};t.create();return t};base.echartsOld=function(e){var t={};t.container=null;t.dataOption=null;t.parentOption=e.parentOption;t.chart=null;t.data=null;t.echarts=null;t.theme=null;t.chartEle=null;e.seriesType=e.seriesType?e.seriesType:"map";t.element=document.createElement("div");$(t.element).addClass("echarts-chart");if(e.show){$(t.element).hide()}else{$(t.element).show()}$(e.container).append(t.element);base.setProperty(t.element,e);t.mapSelectFuc=function(a){if(e.seriesType=="map"){a.on("mapselectchanged",function(a){e.mapSelectedEvent(a,t)})}else{a.on("click",function(a){e.mapSelectedEvent(a,t)})}};t.clickFuc=function(a){require(["echartsConfig"],function(r){a.on("click",function(a){e.clickEvent(a,t)})})};t.hoverFuc=function(t){require(["echartsConfig"],function(a){t.on("hover",function(t){e.hoverEvent(t)})})};t.create=function(){if(e.option){e.dataOption=e.option;if(e.setOptionDataEvent){e.setOptionDataEvent(e)}if(e.type=="map"){require(["echarts2.0"],function(){if(e.mapData&&e.mapName){echarts.util.mapData.params.params[e.mapName]={getGeoJson:function(t){if(typeof e.mapData=="string"){$.getJSON(e.mapData,function(e){t(echarts.util.mapData.params.decode(e))})}else{t(echarts.util.mapData.params.decode(e.mapData))}}};t.echarts=echarts;t.chart=t.echarts.init(t.element,t.theme);t.chartEle=t.chart.setOption(e.dataOption,true);$(window).on("resize",function(){t.reDraw()});if(e.mapSelectedEvent){t.mapSelectFuc(t.chart)}if(e.clickEvent){t.clickFuc(t.chart)}if(e.hoverEvent){t.hoverFuc(t.chart)}}else{t.echarts=echarts;t.chart=t.echarts.init(t.element,t.theme);t.chartEle=t.chart.setOption(e.dataOption,true);$(window).on("resize",function(){t.reDraw()});if(e.mapSelectedCallback){t.mapSelectFuc(t.chart)}if(e.clickCallback){t.clickFuc(t.chart)}if(e.hoverCallback){t.hoverFuc(t.chart)}}})}else{require(["echarts.min",e.theme],function(a,r){t.echarts=a;t.theme=r;t.chart=t.echarts.init(t.element,t.theme);t.chartEle=t.chart.setOption(e.dataOption,true);$(window).on("resize",function(){t.reDraw()});if(e.mapSelectedCallback){t.mapSelectFuc(t.chart)}if(e.clickCallback){t.clickFuc(t.chart)}if(e.hoverCallback){t.hoverFuc(t.chart)}})}}};t.setChartOption=function(t){e.dataOption=t};t.getChartOption=function(){return e.dataOption};t.refresh=function(a){t.setChartOption(a);t.chart.setOption(e.dataOption,true)};t.reDraw=function(){t.chart=t.echarts.init(t.element,t.theme);t.chart.setOption(e.dataOption,true);if(e.mapSelectedEvent){t.mapSelectFuc(t.chart)}};t.create();return t};base.carousel=function(e){var t={};if(!e){return}else{t.container=$(e.container)?$(e.container):null;if(!e||!t.container){return}t.index=0;t.data=e.data?e.data:null;t.remoteData=e.remoteData?e.remoteData:null;t.step=e.step?e.step:4;t.interval=e.interval?e.interval:false;t.carouselBody=$(t.container).find(".carousel-inner")}t.setCarousel=function(){if(e.setCarouselEvent){e.setCarouselEvent(t)}};t.slid=function(){if(e.slidEvent){$(t.container).on("slid.bs.carousel",function(){e.slidEvent(t)})}};t.slide=function(){if(e.slideEvent){$(t.container).on("slide.bs.carousel",function(){e.slideEvent(t)})}};t.next=function(){$(t.container).carousel("next")};t.prev=function(){$(t.container).carousel("prev")};t.drawCarousel=function(){if(e.slideEvent){$(t.container).on("slide.bs.carousel",function(){e.slideEvent(t)})}if(t.data){$(t.container).carousel({interval:t.interval})}};t.create=function(){base.setProperty(t.carouselBody,e);t.slid();t.slide();t.drawCarousel();t.setCarousel();return t};t.create();return t};base.highCharts=function(e){var t={};t.container=e.container?e.container:null;t.chartOption=e.chartOption?e.chartOption:null;t.theme=e.theme?e.theme:"dark";t.callback=e.callback?e.callback:null;t.element=null;t.isMain=e.isMain?e.isMain:true;t.create=function(){if(t.container&&t.chartOption){if(t.isMain){t.element=t.container}else{t.element=document.createElement("div");$(t.container).append(t.element)}base.setProperty(t.element,e);if(t.callback){$(t.element).highcharts(t.chartOption,t.callback)}else{$(t.element).highcharts(t.chartOption)}}return t};t.create();return t};base.progress=function(e){var t={};t.element=null;t.container=e.container?e.container:null;t.data=e.data.replace("/g","%");t.data=Number(t.data)?Number(t.data):0;t.animate=e.animate?e.animate:true;t.progressColor=e.progressColor?e.progressColor:"#0298f7";t.bgColor=e.bgColor?e.bgColor:"#111";t.radius=e.radius?e.radius:5;t.label=null;t.height=e.height?e.height:9;t.progress=null;t.labelColor=e.labelColor?e.labelColor:"#fff";t.progressLine=null;t.timer=e.timer?e.timer:1e3;t.create=function(){$(t.container).css("height",t.height);$(t.container).css("float","left");$(t.container).html("");if(!e.label){t.setLabel()}else{if(e.label.show||e.label.show=="undefined")t.setLabel()}t.setProgress();base.setProperty(t.element,e);return t};t.setLabel=function(){t.label=document.createElement("div");$(t.label).addClass("progressLabel");$(t.label).css("text-align","center");$(t.label).css("position","relative");$(t.label).css("height",t.height);$(t.label).css("z-index",3);if(t.height>9){$(t.label).css("top",t.height-9)}else{$(t.label).css("top",-(9-t.height+3))}$(t.label).css("color",t.labelColor);$(t.label).css("font-size",t.height);$(t.label).html(0+"%");$(t.container).append(t.label)};t.progressGlass=null;t.setProgressGlass=function(){t.progressGlass=document.createElement("div");$(t.progressGlass).addClass("progressGlass");$(t.progressGlass).css("background-color","rgba(255,255,255,0.35)");$(t.progressGlass).css("height",t.height*.4);$(t.progressGlass).css("position","absolute");$(t.progressGlass).css("border-radius",t.radius);$(t.progressGlass).css("left",2);$(t.progressGlass).css("right",2);$(t.progressGlass).css("top",1);$(t.progress).append(t.progressGlass)};t.setProgress=function(){t.progress=document.createElement("div");$(t.progress).css("border-radius",t.radius);$(t.progress).css("width","100%");$(t.progress).css("position","relative");$(t.progress).css("z-index",1);$(t.progress).css("top",-6);$(t.progress).css("background",t.bgColor);$(t.progress).css("padding",1);$(t.progress).css("height",t.height);$(t.progress).css("font-size","13px");$(t.progress).css("box-shadow","0 0 5px rgba(0,0,0,0.7)");$(t.container).append(t.progress);if(!base.IE8()){t.setProgressGlass()}t.setProgressLine()};t.clear=function(){$(t.progressLine).css("width",0)};t.timeoutFuc=null;t.animate=function(){if(t.animate){$(t.progressLine).css("width",0);var e=0;t.timeoutFuc=window.setInterval(function(){e++;$(t.label).html(e+"%");if(e>=t.data){window.clearInterval(t.timeoutFuc)}},t.timer/t.data);$(t.progressLine).animate({width:$(t.progress).width()*(t.data/100)},t.timer)}else{$(t.label).html(t.data+"%");$(t.progressLine).css("width",$(t.progress).width()*(t.data/100))}};t.setProgressLine=function(){t.progressLine=document.createElement("div");$(t.progressLine).addClass("progressLine");$(t.progressLine).css("border-radius",t.radius);if(jQuery.isArray(t.progressColor)){var e=null;var a=0;var r=0;$(t.progressColor).each(function(n,o){if(o.split(":").length>1){a=r;r=o.split(":")[1]}else{a=r;r=Math.round(100/t.progressColor.length*(n+1))}if(t.data>=a&&t.data<r){e=o}});if(e){var n=e.split(":")[0];$(t.progressLine).css("background",n);$(t.progressLine).css("box-shadow","0 0 15px "+n)}}else{$(t.progressLine).css("background",t.progressColor)}$(t.progressLine).css("padding",0);$(t.progressLine).css("height","100%");$(t.progress).append(t.progressLine);t.animate()};t.create();return t};base.roundLoader=function(e){var t={};t.container=e.container?e.container:null;t.time=e.time?e.time:null;t.showPercentage=e.showPercentage?e.showPercentage:false;t.element=null;t.value=t.value?t.value:0;t.create=function(){if(base.IE8()){return}if(e&&t.container){require(["radialIndicator"],function(){base.setProperty(t.element,e);t.set()})}return t};t.set=function(){if(t.time){window.setInterval(function(){if(t.value<100){t.value=t.value+1}else{t.value=0;if(e.drawEvent){e.drawEvent(t)}}t.draw()},t.time/100)}else{t.draw()}};t.draw=function(){$(t.container).html("");t.element=$(t.container).radialIndicator({radius:12,showPercentage:t.showPercentage,displayNumber:false,barWidth:2.5,roundCorner:true,barBgColor:"rgba(0,0,0,0)",barColor:"#20c6fc",shadowColor:"#20c6fc",shadowRadius:5}).data("radialIndicator");t.element.value(t.value)};t.create();return t};base.scroll=function(e){var t={};t.container=e.container?e.container:null;t.topEvent=e.topEvent?e.topEvent:null;t.bottomEvent=e.bottomEvent?e.bottomEvent:null;t.scrollEvent=e.scrollEvent?e.scrollEvent:null;t.xScroll=e.xScroll?e.xScroll:false;t.callback=e.callback?e.callback:null;t.scrollOption={mouseWheel:true};t.create=function(){require(["jqScrollbar"],function(){if(t.scrollEvent){t.scrollOption.callbacks.onScroll=function(){t.scrollEvent(t)}}if(t.bottomEvent){t.scrollOption.callbacks.onTotalScroll=function(){t.bottomEvent(t)}}if(t.topEvent){t.scrollOption.callbacks.onTotalScrollBack=function(){t.topEvent(t)}}if(t.xScroll){t.scrollOption.horizontalScroll=t.xScroll}$(t.container).mCustomScrollbar(t.scrollOption);if(t.callback){t.callback(t)}return t});return t};t.destroy=function(){$(t.container).mCustomScrollbar("destroy")};t.disable=function(){$(t.container).mCustomScrollbar("disable")};t.create();return t};base.grid=function(e){var t={};t.container=e.container?e.container:null;t.table=null;t.ajaxType=e.ajaxType?e.ajaxType:"get";t.header=null;t.body=null;t.footer=null;t.params={};t.columns=null;t.gridOption=e.gridOption?e.gridOption:null;t.pagination=e.pagination?e.pagination:true;t.paginationContainer=null;t.paginationNumber=5;t.url=e.url?e.url:null;t.data=e.data?e.data:null;t.pageSize=e.pageSize?e.pageSize:10;t.pageNumber=1;t.callback=e.callback?e.callback:null;t.total=0;t.pageCount=0;t.pageItemOption={first:{type:"first",title:"首页",number:1,context:"<i class='fa fa-angle-double-left'></i>"},previous:{type:"previous",title:"上一页",number:t.pageNumber-1,context:"<i class='fa fa-angle-left'></i>"},moreLeft:{type:"moreLeft",context:"..."},moreRight:{type:"moreRight",context:"..."},next:{type:"next",number:t.pageNumber-1,title:"下一页",context:"<i class='fa fa-angle-right'></i>"},last:{type:"last",number:t.pageCount,title:"末页",context:"<i class='fa fa-angle-double-right'></i>"},jump:{type:"jump",context:"到第<input type='text' class='pageInput form-control'/>页<button style='margin-left:5px' class='btn btn-primary'>确定</button>"},page:{number:null,type:"page",context:null,cls:"fb-page-item"}};t.create=function(){if(t.container){t.drawTable()}return t};t.drawTable=function(){if($(t.container).children("table").length==0){t.table=document.createElement("table");base.setProperty(t.table,t.gridOption.grid);$(t.container).append(t.table)}else{t.table=$(t.container).children("table")[0];base.setProperty(t.table,t.gridOption.grid)}t.drawHeader();t.drawBody();t.drawFooter();if(t.pagination){t.query({isPagination:true})}};t.drawSort=function(e,a){var r="<div class='btn-group'><a class='dropdown-toggle' data-toggle='dropdown'><span>"+a.columnContext+"</span><i class='fa fa-sort-down'></i></a>"+"<ul class='dropdown-menu' role='menu'>"+"<li><a type='desc'>降序</a></li>"+"<li><a type='asc'>升序</a></li>"+"<li><a>正常</a></li>"+"</ul>";$(e).html(r);$(e).find(".dropdown-menu a").unbind("click").on("click",function(){switch($(this).attr("type")){case"desc":t.params.sort=a.columnName+"_desc";break;case"asc":t.params.sort=a.columnName+"_asc";break;default:if(t.params.sort)delete t.params.sort;break}t.pageNumber=1;t.query({isPagination:true})})};t.drawHeader=function(){if($(t.container).children("thead").length==0){if(t.gridOption){if(t.gridOption.columns&&t.gridOption.columns.length>0){t.columns=t.gridOption.columns;t.header=document.createElement("thead");$(t.table).append(t.header);$(t.columns).each(function(e,a){var r=document.createElement("tr");$(t.header).append(r);$(a).each(function(e,a){var n=document.createElement("th");base.setProperty(n,a);if(a.sort){t.drawSort(n,a)}else{$(n).html(a.columnContext)}$(r).append(n)})})}}}};t.query=function(e){$(t.body).html("");t.params.pageSize=t.pageSize;t.params.pageNumber=t.pageNumber;if(t.url){base.ajax({url:t.url,params:t.params,type:t.ajaxType,success:function(a){$(t.body).html("");var r=a.data;t.total=a.total;$(r).each(function(e,a){var r=document.createElement("tr");$(t.body).append(r);$(t.columns[0]).each(function(e,n){var o=document.createElement("td");if(t.gridOption.columnDefine[n.columnName]){var i=t.gridOption.columnDefine[n.columnName];if(i.drawEvent){i.drawEvent(a[n.columnName],o)}}else{$(o).html(a[n.columnName])}$(r).append(o)})});if(e){if(e.isPagination){t.drawPagination()}}if(t.callback){t.callback()}},beforeSend:function(){$(t.body).html("<tr><td class='tb-loadContainer' style='height:200px' colspan='"+$(t.table)[0].rows.item(0).cells.length+"'></td></tr>");base.loading($(t.body).find(".tb-loadContainer"))}})}};t.drawBody=function(){$(t.table).remove("tbody");
t.body=document.createElement("tbody");$(t.table).append(t.body)};t.drawFooter=function(){$(t.table).remove("tfoot");t.footer=document.createElement("tfoot");$(t.table).append(t.footer)};t.drawPagination=function(){if(!t.paginationContainer){t.paginationContainer=document.createElement("ul");$(t.paginationContainer).addClass("fb-grid-pagination");$(t.container).append(t.paginationContainer)}else{$(t.paginationContainer).html("")}if(t.total%t.pageSize==0){t.pageCount=t.total/t.pageSize}else{t.pageCount=Math.floor(t.total/t.pageSize)+1}t.drawPaginationItem()};t.setActive=function(e){$(t.paginationContainer).find(".active").removeClass("active");$(e).addClass("active")};t.drawPaginationItem=function(){$(t.paginationContainer).find("li").remove();t.createPageItem("info");if(t.pageCount<=t.paginationNumber){for(var e=1;e<=t.pageCount;e++){t.createPageItem("page",e)}}else{if(t.pageNumber<t.paginationNumber){for(var e=1;e<=t.paginationNumber;e++){t.createPageItem("page",e)}t.createPageItem("moreRight");t.createPageItem("next",t.pageNumber+1);t.createPageItem("last",t.pageCount)}else if(t.pageNumber>t.pageCount-t.paginationNumber){t.createPageItem("first",1);t.createPageItem("previous",t.pageNumber-1);t.createPageItem("moreLeft");for(var e=t.pageCount-t.paginationNumber;e<=t.pageCount;e++){t.createPageItem("page",e)}}else{t.createPageItem("first",1);t.createPageItem("previous",t.pageNumber-1);t.createPageItem("moreLeft");for(var e=t.pageNumber-Math.floor(t.paginationNumber/2);e<=t.pageNumber+Math.floor(t.paginationNumber/2);e++){t.createPageItem("page",e)}t.createPageItem("moreRight");t.createPageItem("next",t.pageNumber+1);t.createPageItem("last",t.pageCount)}}t.createPageItem("jump")};t.createPageItem=function(e,a){var r=document.createElement("li");$(t.paginationContainer).append(r);$(r).attr("type",e);switch(e){case"info":$(r).html("<div style='letter-spacing:0.5px;padding:0 20px;font-size:13px;'>共"+t.pageCount+"页("+t.total+"条记录)"+""+"</div>");break;case"first":$(r).html("<i class='fa fa-angle-double-left'></i>");$(r).attr("title","首页");$(r).on("click",function(){t.pageNumber=a;t.drawPaginationItem();t.query()});break;case"previous":$(r).html("<i class='fa fa-angle-left'></i>");$(r).attr("title","上一页");$(r).on("click",function(){t.pageNumber=a;t.drawPaginationItem();t.query()});break;case"next":$(r).html("<i class='fa fa-angle-right'></i>");$(r).attr("title","下一页");$(r).on("click",function(){t.pageNumber=a;t.drawPaginationItem();t.query()});break;case"last":$(r).html("<i class='fa fa-angle-double-right'></i>");$(r).attr("title","末页");$(r).on("click",function(){t.pageNumber=a;t.drawPaginationItem();t.query()});break;case"page":$(r).addClass("fb-page-item");$(r).html(a);if(t.pageNumber==a){$(r).addClass("active")}$(r).on("click",function(){t.pageNumber=a;t.drawPaginationItem();t.query()});break;case"moreLeft":case"moreRight":$(r).html("...");break;case"jump":$(r).html("到第<input type='number' class='pageInput form-control'/>页<button style='margin-left:5px' class='btn btn-primary'>确定</button>");$(r).find("button").on("click",function(){var e=$(r).find("input").val();if(e){if(e<1){e=1;$(r).find("input").val(e)}else if(e>t.pageCount){e=t.pageCount}t.pageNumber=e;t.query({isPagination:true})}});break}};t.pageTo=function(e){t.pageNumber=e;t.drawPaginationItem();t.query()};t.reset=function(){t.pageNumber=1;t.pageSize=e.pageSize?e.pageSize:t.pageSize;t.params={};t.query({isPagination:true})};t.search=function(e){t.pageNumber=1;t.pageSize=e.pageSize?e.pageSize:t.pageSize;if(e){t.params=e.params?e.params:t.params}t.query({isPagination:true})};t.addRow=function(e,a){var r=document.createElement("tr");$(t.body).append(r);$(e).each(function(e,t){var a=document.createElement("td");a.html(t);$(r).append(a)});if(a){a(t)}};t.deleteRow=function(e){$(e).parents("tr").remove()};t.create();return t};base.getCR=function(e,t){var a=null;var r="";if((typeof e).toLowerCase()=="string"){a=$("input[name='"+e+"']:checked");if(t){$(a).each(function(e,t){if(e==$(a).length-1){r+=$(t).val()}else{r+=$(t).val()+","}});return r}else{return a}}else{a=$("input[name='"+$(e).attr("name")+"']:checked");if(t){$(a).each(function(e,t){if(e==$(a).length-1){r+=$(t).val()}else{r+=$(t).val()+","}})}else{return a}}};base.getChecks=function(e){var t=$("input[name='"+e+"']");var a=[];$(t).each(function(e,t){if($(t).is(":checked")){a.push($(t).val())}});return a};base.setChecks=function(e,t){var a=$("input[name='"+t+"']");$(a).each(function(e,t){$(t).prop("checked",false)});$(e).each(function(e,t){$(a).filter("[value='"+t+"']").prop("checked",true)})};base.selectAll=function(e,t,a){$(e).on("click",function(){if($(this).is(":checked")){$(t).prop("checked",true)}else{$(t).prop("checked",false)}if(a){a(e,t)}});$(t).on("click",function(){if($(t).filter(":checked").length==$(t).length){$(e).prop("checked",true)}else{$(e).prop("checked",false)}if(a){a(e,t)}})};base.clearLastCharacter=function(e){e=e.substring(0,e.length-1);return e};base.formEntity=function(){var e=this;e.init=function(e,t){var a=$(t)[0].elements;for(var r in e){var n=$(t).find("[name='"+r+"']");var o=n.attr("type");if(o){o=o.toLowerCase()}switch(o){case"checkbox":base.setChecks(e[r],n.attr("name"));break;case"radio":base.setChecks(e[r],n.attr("name"));break;default:n.val(e[r]);break}}}};base.form=new base.formEntity;base.form.automatic=function(){};base.form.fileUpload=function(e){var t={};t.url=e.url?e.url:null;t.success=e.success?e.success:null;t.error=e.error?e.error:null;t.id=e.id?e.id:null;t.params=e.params?e.params:null;t.create=function(){if(!t.url||!t.id){return}require(["fileUpload"],function(){jQuery.ajaxFileUpload({url:t.url,secureuri:false,fileElementId:t.id,dataType:"json",data:t.params,success:function(e,a){if(t.success){t.success(e,a)}},error:function(e,a,r){if(t.error){t.error(e,a,r)}}})})};t.create()};base.form.paramsToString=function(e){var t="?";var a=0;for(var r in e){if(a==0){t+=r+"="+e[r]}else{t+="&"+r+"="+e[r]}a++}return t};base.form.download=function(e){var t={};t.url=e.url?e.url:null;t.params=e.url?e.params:null;t.download=function(){$.ajax({url:t.url+base.form.paramsToString(t.params),type:"post",data:t.params,dataType:"json",contentType:"application/json;charset=UTF-8",success:function(e){}})};t.download();return t};base.form.getParams=function(e,t){var a=null;if(t){a=""}else{a={}}var r={};r.form=e?e:null;if(r.form){var n=$(r.form)[0].elements;for(var o=0,i=n.length;o<i;o++){var l=n[o];var s=$(l).attr("name");if(!s){continue}if(l.tagName.toLowerCase()=="input"){if($(l).attr("type").toLowerCase()=="checkbox"||$(l).attr("type").toLowerCase()=="radio"){if(a[s]){continue}else{var c="";$(r.form).find("input[name='"+s+"']").each(function(e,t){if($(t).is(":checked")){c+=$(t).val()+","}});if(c!=""){c=base.clearLastCharacter(c);if(t){if(a==""){a+=s+"="+c}else{a+="&"+s+"="+c}}else{a[s]=c}}}}else if($(l).attr("type").toLowerCase()=="button"){continue}else{if($(l).val()){if(t){if(a==""){a+=s+"="+encodeURIComponent($(l).val())}else{a+="&"+s+"="+encodeURIComponent($(l).val())}}else{a[s]=$(l).val()}}}}else if(l.tagName.toLowerCase()=="select"&&$(l).val()=="-1"){continue}else if(l.tagName.toLowerCase()=="button"){continue}else{if(t){if(a==""){a+=s+"="+encodeURIComponent($(l).val())}else{a+="&"+s+"="+encodeURIComponent($(l).val())}}else{a[s]=$(l).val()}}}}return a};base.form.validate=function(option){var self={};self.form=option.form?option.form:null;self.roles=option.roles?option.roles:null;self.promptType=option.promptType?option.promptType:"follow";self.checkAll=option.checkAll?option.checkAll:false;self.errorMsg=[];self.isPass=true;self.tipPosition=option.tipPosition?option.tipPosition:"bottom";self.passCallback=option.passCallback?option.passCallback:null;self.notPassCallback=option.notPassCallback?option.notPassCallback:null;self.error=function(e,t,a){switch(self.promptType){case"top":if($(a).attr("type")){if($(a).attr("type").toLowerCase()=="checkbox"||$(a).attr("type").toLowerCase()=="radio"){}else{$(a).addClass("errorStyle")}}else{$(a).addClass("errorStyle")}break;case"tip":if($(a).attr("type")){if($(a).attr("type").toLowerCase()=="checkbox"||$(a).attr("type").toLowerCase()=="radio"){$(a).parent().attr("data-toggle","tooltip");$(a).parent().attr("data-placement",self.tipPosition);$(a).parent().attr("data-trigger","manual");$(a).parent().attr("title",t)}else{$(a).attr("data-toggle","tooltip");$(a).attr("data-placement",self.tipPosition);$(a).attr("data-trigger","manual");$(a).attr("title",t);$(a).addClass("errorStyle")}}else{$(a).attr("data-toggle","tooltip");$(a).attr("data-placement",self.tipPosition);$(a).attr("data-trigger","manual");$(a).attr("title",t);$(a).addClass("errorStyle")}break;case"follow":$(a).parent().find(".ui-form-error").remove();$(a).parent().append("<div class='ui-form-error' style='color:red;text-align:left;'>"+t+"</div>");if($(a).attr("type")!="checkbox"&&$(a).attr("type")!="radio"){$(a).addClass("errorStyle")}break}self.errorMsg.push(t+"<br>");return true};self.verify=function(e,t){var a="";var r=false;var n=t.text?t.text:$(e).attr("name");for(var o in t){switch(o){case"required":if(t[o]){switch($(e)[0].tagName.toLowerCase()){case"select":var i=$(e).val();if(!i||i=="-1"){if(self.promptType=="tip"||self.promptType=="follow"){a="必选项"}else{a=n+"是必选项"}r=self.error(t,a,e)}break;case"textarea":var i=$(e).val();if(!i){if(self.promptType=="tip"||self.promptType=="follow"){a="必填项"}else{a=n+"是必填项"}r=self.error(t,a,e)}break;case"input":switch($(e).attr("type")){case"checkbox":case"radio":if(base.getChecks($(e).attr("name")).length==0){if(self.promptType=="tip"||self.promptType=="follow"){a="必选项"}else{a=n+"是必选项"}r=self.error(t,a,e)}break;default:var i=$(e).val();if(!i){if(self.promptType=="tip"||self.promptType=="follow"){a="必填项"}else{a=n+"是必填项"}r=self.error(t,a,e)}break}break}}break;case"int":case"float":case"number":var i=$(e).val();if(!i||i==""){return}var l=/^\d+$/;var s="整数";if(o=="float"){l=/^\d+(\.\d+)?$/;s="小数"}else if(o=="number"){s="数字"}if(isNaN(Number(i))){if(self.promptType=="tip"){a="必须是"+s}else{a=n+"必须是"+s}r=self.error(t,a,e)}else{if(!l.test(i)&&o!="number"){if(self.promptType=="tip"){a="必须是"+s}else{a=n+"必须是"+s}r=self.error(t,a,e)}else{switch((typeof t[o]).toLowerCase()){case"number":if(Number(i)>t[o]){if(self.promptType=="tip"){a="数字不能大于"+t[o]}else{a=n+"数字不能大于"+t[o]}r=self.error(t,a,e)}break;default:if(jQuery.isArray(t[o])&&t[o].length>=2){if(i<t[o][0]){if(self.promptType=="tip"){a="不能小于"+t[o][0]}else{a=n+"不能小于"+t[o][0]}r=self.error(t,a,e)}else if(i>t[o][1]){if(self.promptType=="tip"){a="不能大于"+t[o][1]}else{a=n+"不能小于"+t[o][0]}r=self.error(t,a,e)}}break}}}break;case"length":var i=$(e).val();if(!i||i==""){return}if(i.length>t[o]){if(self.promptType=="tip"){a="不能超过"+t[o]+"个字符"}else{a="不能超过"+t[o]+"个字符"}r=self.error(t,a,e)}break;case"identityCard":a="身份证号不正确";var l=/(^\d{15}$)|(^\d{17}(\d|X)$)/;var i=$(e).val();if(!i||i==""){return}if(!l.test(i)){r=self.error(t,a,e)}break;case"en":a="必须是英文";var l=/^[a-z]*|[A-Z]*$/;var i=$(e).val();if(!i||i==""){return}if(!l.test(i)){r=self.error(t,a,e)}break;case"ip":a="IP地址不正确";var l=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;var i=$(e).val();if(!i||i==""){return}if(!l.test(i)){r=self.error(t,a,e)}break;case"money":var l=/^\d+.?\d{0,2}$/;var i=$(e).val();if(!i||i==""){return}if(isNaN(i)){a="格式不正确";r=self.error(t,a,e)}else{i=Number(i);if(!l.test(i)){if(self.promptType=="tip"){a="格式不正确"}else{a="格式不正确"}r=self.error(t,a,e)}}break;case"mobile":a="手机号码不正确";var l=/^1\d{10}$/;var i=$(e).val();if(!i||i==""){return}if(!l.test(i)){r=self.error(t,a,e)}break;case"telephone":a="电话号码不正确";var l=/^0\d{2,3}-?\d{7,8}$/;var i=$(e).val();if(!i||i==""){return}if(!l.test(i)){r=self.error(t,a,e)}break;case"email":a="邮箱地址不正确";var l=/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/;var i=$(e).val();if(!i||i==""){return}if(!l.test(i)){r=self.error(t,a,e)}break;case"filter":var l=/^\w+$/;var i=$(e).val();if(!i||i==""){return}if(!l.test(i)){a="只允许字母、数字、下划线";r=self.error(t,a,e)}break;case"filterCN":var l=/^[\u4E00-\u9FA5a-zA-Z0-9_]+$/;var i=$(e).val();if(!i||i==""){return}if(!l.test(i)){a="不能包含特殊字符";r=self.error(t,a,e)}break;case"first":var c=t[o];var d=c.length;var i=$(e).val();if(!i||i==""){return}if(i.slice(0,d)!=c){a="必须以"+c+"开头";r=self.error(t,a,e)}break;case"website":var u="^[^s]+";var l=new RegExp(u);var i=$(e).val();if(!i||i==""){return}if(!l.test(i)){a="网络地址不正确";r=self.error(t,a,e)}break}}return r};self.init=function(){self.errorMsg=[];self.isPass=true;$(self.form).find(".alert").remove();$(self.form).find("[data-toggle='tooltip']").tooltip("destroy");$(self.form).find("[data-toggle='tooltip']").removeAttr("title");$(self.form).find("[data-toggle='tooltip']").removeAttr("data-toggle");$(".errorStyle").removeClass("errorStyle");$(".ui-form-error").remove();if($("#errorStyle").length==0){$("head").append("<style id='errorStyle'>.errorStyle{border:1px solid red;}</style>")}};self.scan=function(){self.init();if(self.form){if(self.roles){var i=0;for(var name in self.roles){var role=self.roles[name];var obj=$(self.form).find("[name='"+name+"']");if(role&&obj.length>0){if(self.checkAll){self.verify(obj,role)}else{if(self.verify(obj,role)){break}}}i++}}else{var tmp={};if($(self.form).length==0){return}var eles=$(self.form)[0].elements;for(var i=0,j=eles.length;i<j;i++){var o=$(eles[i]);var role=o.attr("role");if(role){var roleData=eval("("+role+")");var name=o.attr("name");if(self.checkAll){if(tmp[name]){continue}else{self.verify(o,roleData);tmp[name]=true}}else{if(tmp[name]){continue}else{if(self.verify(o,roleData)){break}}}}}}if(self.errorMsg.length>0){switch(self.promptType){case"tip":if(self.checkAll){$(self.form).find("[data-toggle='tooltip']").tooltip("show")}else{$(self.form).find("[data-toggle='tooltip']:eq(0)").tooltip("show")}break;case"top":var alertDialog=document.createElement("div");$(alertDialog).addClass("alert alert-danger");$(self.form).prepend(alertDialog);if(self.checkAll){$(self.errorMsg).each(function(e,t){$(alertDialog).append(e+1+"."+t)})}else{$(alertDialog).append(self.errorMsg[0])}break}self.isPass=false}}else{self.isPass=false}if(self.isPass){if(self.passCallback){self.passCallback(self)}}else{if(self.notPassCallback){self.notPassCallback(self)}}return self.isPass};self.scan();return self.isPass};base.form.reset=function(e,t){if(e){$(e)[0].reset();if(t){t(e)}}};base.form.button=function(e){var t={};t.label=e.label?e.label:"确定";t.disabled=e.disabled?e.disabled:false;t.container=e.container?e.container:$("body");t.element=null;t.clickEvent=e.clickEvent?e.clickEvent:null;t.id=e.id?e.id:null;t.cls=e.cls?e.cls:null;t.style=e.style?e.style:null;t.create=function(){t.element=document.createElement("button");$(t.element).html(t.label);if(t.cls){$(t.element).addClass(e.cls.replace(/,/g," "))}else{$(t.element).addClass("btn btn-primary")}if(t.style){$(t.element).attr("style",e.style.replace(/,/g,";"))}if(t.id){$(t.element).attr("id",t.id)}if(t.disabled){$(t.element).addClass("disabled")}else{if(t.clickEvent){$(t.element).on("click",function(){t.clickEvent(t)})}}$(t.container).append(t.element)};t.create();return t};base.form.date=function(e){var t={};t.dateOption=e.dateOption?e.dateOption:{};t.element=e.element?e.element:null;t.isTime=e.isTime?e.isTime:false;t.theme=e.theme?e.theme:"molv";t.create=function(){if($(t.element).length>0){require(["date"],function(){laydate.skin(t.theme);$(t.element).on("click",function(){if(t.isTime){t.dateOption.istime=true;t.dateOption.format="YYYY-MM-DD hh:mm:ss"}laydate(t.dateOption)});return t})}};t.create();return t};base.form.autoSelect=function(e){var t={};t.container=e.container?e.container:null;t.data=e.data?e.data:null;t.url=e.url?e.url:null;t.params=e.params?e.params:{};t.size=e.size?e.size:10;t.highLight=e.highLight?e.highLight:true;t.autoSelectObj=null;t.type=e.type?e.type:"get";t.ajaxSettings=e.ajaxSettings?e.ajaxSettings:{};t.dropContainer=e.dropContainer?e.dropContainer:null;t.clickCallback=e.clickCallback?e.clickCallback:null;t.width=e.width?e.width:"auto";t.create=function(){if(t.container){require(["autoSelect"],function(){if(t.data){t.autoSelectObj=$(t.container).autoSelect({lookup:t.data,dropContainer:t.dropContainer,clickCallback:t.clickCallback,width:t.width,onSelect:function(e){}})}else if(t.url){t.autoSelectObj=$(t.container).autoSelect({serviceUrl:t.url,params:t.params,type:t.type,dropContainer:t.dropContainer,ajaxSettings:t.ajaxSettings,clickCallback:t.clickCallback,width:t.width,lookupFilter:function(e,t,a){},onSelect:function(e){}})}})}return t};t.disable=function(){t.autocompleteObj.disable()};t.create();return t};base.form.treeSelect=function(e){var t={};t.container=e.container?e.container:null;t.parentContainer=e.parentContainer?e.parentContainer:$("body");t.data=e.data?e.data:null;t.url=e.url?e.url:null;t.params=e.params?e.params:{};t.multi=e.multi?e.multi:false;t.treeContainer=null;t.type=e.type?e.type:"get";t.clickEvent=e.clickEvent?e.clickEvent:function(){};t.clickCallback=e.clickCallback?e.clickCallback:null;if(!t.multi){t.clickEvent=function(e,a,r){$(t.container).val(r.name);$(t.container).attr("tid",r.id);t.hide();if(t.clickCallback){t.clickCallback(e,a,r)}}}t.id=e.id?e.id:base.getRandom(1e3,9999);t.setting={data:{simpleData:{enable:true}},callback:{onClick:t.clickEvent}};t.create=function(){if($(t.container).length>0){$(t.container).on("click",function(e){if($(this).hasClass("active")){return}t.createTree();$(this).addClass("active")});$(document).on("click",function(e){var a=e.target;if($(a).is($(t.container))){return}if($(a).parents("[type='treeSelect']").length>0){return}if($(a).hasClass("[type='treeSelect']").length>0){return}t.hide(e)})}};t.createTree=function(){t.treeContainer=document.createElement("div");$(t.treeContainer).attr("type","treeSelect");$(t.treeContainer).attr("id",t.id);$(t.treeContainer).css("position","absolute");$(t.treeContainer).css("z-index","10000");if(t.cls||t.style){base.setProperty(t.element,e)}else{$(t.treeContainer).css("border","1px solid #109bdc");$(t.treeContainer).css("background-color","#fff");$(t.treeContainer).css("height",180);$(t.treeContainer).css("overflow","auto");$(t.treeContainer).css("box-shadow","0 0 5px #aaa")}$(t.treeContainer).addClass("ztree");$(t.treeContainer).css("left",$(t.container).offset().left);$(t.treeContainer).css("top",$(t.container).offset().top+$(t.container).height());$("body").append(t.treeContainer);if(t.data){base.tree({container:$(t.treeContainer),data:t.data,setting:t.setting})}else{if(t.url){base.ajax({url:t.url,type:t.type,params:t.params,success:function(e){base.tree({container:$(t.treeContainer),data:e,setting:t.setting})}})}}};t.hide=function(e){$(t.container).removeClass("active");$(t.treeContainer).remove()};t.create();return t};base.echarts=function(e){var t={};t.container=e.container?e.container:$("body");t.chartOption=e.chartOption?e.chartOption:null;t.chart=null;t.echarts=e.echarts?e.echarts:null;t.drawCallback=e.drawCallback?e.drawCallback:null;t.create=function(){if(!t.echarts){return}if(t.chartOption){if(t.beforeEvent){t.beforeEvent(t)()}t.chart=t.echarts.init($(t.container)[0]);if(t.chartOption.length>0){$(t.chartOption).each(function(e,a){t.chart.setOption(a)})}else{t.chart.setOption(t.chartOption)}if(t.drawCallback){t.drawCallback(t)}$(window).on("resize",function(){t.chart.resize()})}return t};t.refresh=function(e){t.chartOption=e;t.chart.setOption(t.chartOption)};t.create();return t};base.earthRollMap=function(e){var t={};t.rippleImg="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pg0KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiANCiJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPg0KPHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiPiAgICANCiAgICA8Y2lyY2xlIGN4PSIyNSIgY3k9IjI1IiByPSI1IiAgc3Ryb2tlPSJyZ2IoNCwxOTgsMjU0KSIgbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjMiIGZpbGwtb3BhY2l0eT0iMSIgZmlsbD0icmdiYSgwLDAsMCwwKSIgc3Ryb2tlLW9wYWNpdHk9IjAuMiI+DQogICAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZVR5cGU9InhtbCIgIGF0dHJpYnV0ZU5hbWU9InIiIGZyb209IjAiIHRvPSIyMCIgZHVyPSIxcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZT4NCiAgICAgICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ib3BhY2l0eSIgZnJvbT0iMSIgdG89IjAiIGJlZ2luPSIwcyIgZHVyPSIxcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIC8+DQogICAgPC9jaXJjbGU+DQo8L3N2Zz4=";t.container=e.container?e.container:$("body");t.data=e.data?e.data:null;t.mapOption={backgroundColor:"#999",globe:{baseTexture:"/service/images/earth-specbetter.jpg",displacementScale:0,environment:"#000f1a",shading:"color",realisticMaterial:{roughness:.9},postEffect:{enable:false,bloom:{enable:true,bloomIntensity:.1}},depthOfField:{enable:true},FXAA:{enable:true},viewControl:{autoRotate:true,distance:170,center:[0,0,0],beta:130,alpha:30,autoRotateAfterStill:.5}},series:t.data};t.create=function(){require(["echartsGl"],function(){var e=base.echarts({container:t.container,option:t.mapOption})})};t.create()};base.geoRollMap=function(e){var t={};t.container=e.container?e.container:$("body");t.data=e.data?e.data:null;t.mapEntity=null;t.pointsMapEntity=null;t.mapName=e.mapName?e.mapName:"world";t.mapOption={geo3D:{map:t.mapName,shading:"color",regionHeight:6,silent:true,groundPlane:{show:false},light:{main:{intensity:0},ambient:{intensity:0}},viewControl:{distance:50,center:[116.405285,39.904989]},itemStyle:{areaColor:"#111"},boxHeight:.5},series:t.data};t.create=function(){require(["echarts"],function(e){base.ajax({type:"get",url:"/service/map/"+t.mapName+".json",success:function(a){e.registerMap(t.mapName,a);require(["echartsGl"],function(){t.mapEntity=base.echarts({container:t.container,option:[{series:[{type:"map",map:t.mapName}]},t.mapOption]})})}})})};t.create()};base.isBoolean=function(e){if(typeof e.toLowerCase()=="boolean"){return true}else{return false}};base.loadPage=function(e){var t={};t.url=e.url?e.url:null;t.container=e.container?e.container:null;t.params=e.params?e.params:null;t.callback=e.callback?e.callback:null;t.scrolls=e.scrolls?e.scrolls:null;t.load=function(){if(t.container&&t.url){base.ajax({type:"get",url:t.url,dataType:"text",params:t.params,success:function(e){$(t.container).html(e);if(t.callback){t.callback(t)}if(t.scrolls){$(t.scrolls.split(",")).each(function(e,t){if($(t).length>0){base.scroll({container:$(t)})}})}},beforeSend:function(){base.loading($(t.container))},error:function(){$(t.container).html("加载错误")}})}};t.load()};base.require=function(e,t){require([e],function(){if(t){t()}})};base.datatables=function(e){var t={};t.option=e.option?e.option:null;t.container=e.container?e.container:null;t.grid=null;t.filter=e.filter?e.filter:null;t.callback=e.callback?e.callback:null;t.language={sProcessing:"处理中...",sLengthMenu:"显示 _MENU_ 条记录",sZeroRecords:"没有匹配结果",sInfo:"第 _START_ 至 _END_ 条记录，共 _TOTAL_ 条",sInfoEmpty:"显示第 0 至 0 条记录，共 0 条",sInfoFiltered:"(由 _MAX_ 条记录过滤)",sInfoPostFix:"",sSearch:"搜索:",sUrl:"",sEmptyTable:"表中数据为空",sLoadingRecords:"载入中...",sInfoThousands:",",oPaginate:{sFirst:"<i style='font-size:15px;' class='fa fa-angle-double-left'></i>",sPrevious:"<i style='font-size:15px;' class='fa fa-angle-left'></i>",sNext:"<i style='font-size:15px;' class='fa fa-angle-right'></i>",sLast:"<i style='font-size:15px;' class='fa fa-angle-double-right'></i>"},oAria:{sSortAscending:": 以升序排列此列",sSortDescending:": 以降序排列此列"}};t.create=function(){if(t.container&&t.option){t.option.language=t.language;$.fn.dataTable.ext.errMode="none";if(t.filter){t.option.ajax.dataFilter=t.filter}t.grid=$(t.container).DataTable(t.option)}};t.reload=function(){$(t.container).find("thead input[type='checkbox']").prop("checked",false);t.grid.ajax.reload()};t.addRow=function(e){t.grid.row.add(e).draw(false)};t.deleteRow=function(e){$(t.container).find("tbody tr").removeClass("selected");$(e).parents("tr").addClass("selected");t.grid.row(".selected").remove().draw(false)};t.create();return t};base.requestTip=function(e){var t={};t.container=null;if(!e){e={}}t.width=e.width?e.width:200;t.height=e.height?e.height:36;t.color=e.color?e.color:"#555";t.bg=e.bg?e.bg:"#f2f2f2";t.position=e.position?e.position:"top";t.waitWord=e.waitWord?e.waitWord:"正在提交...";t.successWord=e.successWord?e.successWord:"提交成功";t.errorWord=e.errorWord?e.errorWord:"提交错误";t.create=function(){t.container=document.createElement("div");$(t.container).css("position","absolute");$(t.container).css("z-index","2000");switch(t.position){case"top":$(t.container).css("top",5);break;case"center":$(t.container).css("top","50%");$(t.container).css("bottom","50%");break}$(t.container).css("left","46%");$(t.container).css("text-align","center");$(t.container).css("border","1px solid #aaa");$(t.container).css("background",t.bg);$(t.container).css("width",t.width);$(t.container).css("height",t.height);$(t.container).css("margin","auto");$(t.container).css("display","none");$(t.container).css("overflow","auto");$(t.container).css("line-height",t.height-2+"px");$(t.container).css("border-radius",5);$("body").append(t.container)};t.wait=function(e){t.waitWord=e?e:t.waitWord;if(!t.container){t.create()}$(t.container).show();$(t.container).html("<i class='fa fa-spinner fa-pulse fa-3x fa-fw' style='color:#aaa;margin-right:4px;font-size:14px;'></i>"+t.waitWord);$(t.container).fadeIn(100,function(){})};t.success=function(e){t.successWord=e?e:t.successWord;if(!t.container){t.create()}$(t.container).show();$(t.container).html("<i class='fa fa-check-circle' style='color:#01b617;margin-right:4px;font-size:18px;'></i>"+t.successWord);window.setTimeout(function(){$(t.container).fadeOut(function(){$(t.container).remove()})},3e3)};t.error=function(e){t.errorWord=e?e:t.errorWord;if(!t.container){t.create()}$(t.container).html("<i class='fa fa-times-circle' style='color:red;margin-right:4px;font-size:18px;'></i>"+t.errorWord);$(t.container).show();window.setTimeout(function(){$(t.container).fadeOut(function(){$(t.container).remove()})},3e3)};return t};base.arrayToMap=function(e,t,a){var r={};r.data=e?e:null;r.pid=t?t:null;r.map={};if(r.data&&r.data.length>0){if(r.pid){var n=0;r.transform=function(e){var t=0;$(r.data).each(function(o,i){if(i.pid==e){r.map[i.id]=i;if(e==r.pid){n++}t++;if(a){if(t==1&&n==1){r.map[i.id].active=true}}r.transform(i.id)}})};r.transform(r.pid)}}return r.map};base.mapToArray=function(e,t){var a={};a.data=e?e:null;a.array=[];a.pid=t?t:null;if(a.data&&a.pid){a.thansform=function(e,t){for(var r in a.data){var n=a.data[r];if(n.pid==e){if(t){if(!t.items){t.items=[]}t.items.push(n);a.thansform(n.id,n)}else{a.array.push(n);a.thansform(n.id,n)}}}};a.thansform(t)}return a.array};base.confirm=function(e){var t={};t.label=e.label?e.label:"提示";t.text=e.text?e.text:"是否删除?";t.confirmCallback=e.confirmCallback?e.confirmCallback:null;t.cancelCallback=e.cancelCallback?e.cancelCallback:null;t.width=200;t.height=30;t.create=function(){var e=base.modal({label:t.label,context:"<div style='text-align:center;font-size:13px;'>"+t.text+"</div>",width:t.width,height:t.height,contentStyle:"overflow:hidden,padding:20px 0",labelStyle:"font-size:14px",buttons:[{label:"确定",cls:"btn btn-info",clickEvent:function(){if(t.confirmCallback){t.confirmCallback()}e.hide()}},{label:"取消",cls:"btn btn-warning",clickEvent:function(){if(t.cancelCallback){t.cancelCallback()}e.hide()}}]})};t.create();return t};base.findParentToArray=function(e,t){var a={};a.data=e?e:null;a.id=t?t:null;var r=[];if(a.data&&a.id){a.find=function(e){if(a.data[e]){r.push(a.data[e]);a.find(a.data[e].pid)}};a.find(a.id)}return r.reverse()};base.tree=function(e){var t={};t.container=e.container?e.container:null;t.setting=e.setting?e.setting:null;t.data=e.data?e.data:null;t.treeObj=null;t.drawCallback=e.drawCallback?e.drawCallback:null;t.selectNodeId=e.selectNodeId?e.selectNodeId:null;t.selectNode=function(e,a){$(e).each(function(e,a){if(a.id==t.selectNodeId){t.treeObj.selectNode(a);t.treeObj.setting.callback.onClick(null,a.tId,a);return false}else{if(a.children&&a.children.length>0){t.selectNode(a.children)}}})};t.create=function(){$.fn.zTree.init(t.container,t.setting,t.data);if(t.drawCallback){t.treeObj=$.fn.zTree.getZTreeObj($(t.container).attr("id"));t.drawCallback(t.treeObj)}if(t.selectNodeId){t.treeObj=$.fn.zTree.getZTreeObj($(t.container).attr("id"));t.selectNode(t.treeObj.getNodes(),t.treeObj)}};t.create();return t};base.steps=function(e){var t={};t.data=e.data?e.data:null;t.container=e.container?e.container:null;t.width=0;t.header={};t.body={};t.footer={};t.buttonbar=null;t.animate=e.animate==false?false:true;t.tipSize=e.tipSize?e.tipSize:30;t.color=e.color?e.color:"#039bda";t.showNumber=e.showNumber==false?false:true;t.buttons=e.buttons?e.buttons:null;t.lineHeight=e.lineHeight?e.lineHeight:10;t.buttonGroupToggle=e.buttonGroupToggle?e.buttonGroupToggle:null;if(t.container){t.width=$(t.container).width()}t.currentStep=e.currentStep?e.currentStep:0;if(t.currentStep>t.data.length){t.currentStep=t.data.length}t.create=function(){$(t.container).html("");if(t.data&&t.data.length>0){t.setHeader();t.setBody();t.setFooter()}};t.setHeader=function(e){t.header.element=document.createElement("div");$(t.header.element).addClass("ui-steps-header");$(t.container).append(t.header.element);t.header.createStepbar=function(){t.header.stepbar=document.createElement("ul");$(t.header.stepbar).addClass("ui-steps-stepbar");$(t.header.element).append(t.header.stepbar);t.header.createItem=function(e,a){var r=document.createElement("li");$(t.header.stepbar).append(r);$(r).css("width",t.width/t.data.length);var n=document.createElement("div");$(n).attr("type","label");$(n).html(e.label);$(r).append(n);var o=document.createElement("div");$(o).attr("type","tip");$(o).css("width",t.tipSize);$(o).css("height",t.tipSize);if(t.showNumber){$(o).html(a+1)}$(o).css("line-height",t.tipSize+"px");$(o).css("font-size",t.tipSize/3*2);$(r).append(o)};$(t.data).each(function(e,a){t.header.createItem(a,e)})};t.header.createLinebar=function(){t.header.linebar=document.createElement("div");$(t.header.linebar).addClass("ui-steps-linebar");$(t.header.linebar).css("width",t.width/t.data.length*(t.data.length-1));$(t.header.linebar).css("margin-left",t.width/t.data.length/2);$(t.header.linebar).css("margin-right",t.width/t.data.length/2);$(t.header.linebar).css("height",t.lineHeight);$(t.header.element).append(t.header.linebar);$(t.header.linebar).css("top",-t.tipSize+t.lineHeight);t.header.line=document.createElement("div");$(t.header.line).addClass("ui-steps-line");$(t.header.linebar).append(t.header.line)};t.header.step=function(e){var a=$(t.header.linebar).width()/(t.data.length-1)*t.currentStep;if(t.animate){$(t.header.line).animate({width:a})}else{$(t.header.line).css("width",a)}$(t.header.stepbar).find("li").removeClass("active");$(t.header.stepbar).find("li").slice(0,t.currentStep+1).addClass("active")};t.header.back=function(){if(t.currentStep<=0){return}t.currentStep=t.currentStep-1;t.header.step(true)};t.header.forward=function(){if(t.currentStep==t.data.length-1){return}t.currentStep=t.currentStep+1;t.header.step(false)};t.header.createStepbar();t.header.createLinebar();t.header.step()};t.getStep=function(){return t.currentStep};t.getStepCount=function(){return t.data.length};t.toStep=function(e){if(e<0){e=0}if(e>t.data.length-1){e=t.data.length-1}if(e==t.currentStep){return}if(e<t.currentStep){t.currentStep=e;t.header.step();t.body.step();t.footer.check()}else{t.currentStep=e;t.header.step();t.body.step();t.footer.check()}};t.setBody=function(){t.body.element=document.createElement("div");$(t.body.element).addClass("ui-steps-body");$(t.container).append(t.body.element);t.body.createCarousel=function(){t.body.carouselbar=document.createElement("ul");$(t.body.carouselbar).addClass("ui-steps-carouselbar");$(t.body.element).append(t.body.carouselbar);$(t.body.carouselbar).css("width",$(t.container).width()*t.data.length);$(t.data).each(function(e,a){t.body.createCarouselItem(a,e)})};t.body.createCarouselItem=function(e,a){var r=document.createElement("li");$(t.body.carouselbar).append(r);
$(r).html(e.content);$(r).css("width",$(t.container).width());if(a==t.currentStep){$(r).addClass("active")}if(e.contentToggle){$(r).html($(e.contentToggle).children().clone());$(e.contentToggle).remove()}if(e.contentUrl){base.loadPage({container:r,url:e.contentUrl,callback:o.callback?o.callback:null})}if(e.content){$(r).html(e.content)}if(e.callback){e.callback(t)}};t.body.step=function(e){var a=-t.width*t.currentStep;if(t.animate){$(t.body.carouselbar).animate({marginLeft:a})}else{$(t.body.carouselbar).css("margin-left",a)}$(t.body.carouselbar).children("li").removeClass("active");$(t.body.carouselbar).children("li:eq("+t.currentStep+")").addClass("active")};t.body.back=function(){if(t.currentStep<0){return}t.body.step(true)};t.body.forward=function(){if(t.currentStep==t.data.length){return}t.body.step(false)};t.body.createCarousel();t.body.step()};t.back=function(e){if(e){if(!e(t)){return}}t.header.back();t.body.back();t.footer.check()};t.forward=function(e){if(e){if(!e(t)){return}}t.header.forward();t.body.forward();t.footer.check()};t.setFooter=function(){if(t.buttonGroupToggle){t.footer.element=$(t.buttonGroupToggle)}else{t.footer.element=document.createElement("div");$(t.footer.element).addClass("ui-steps-footer");$(t.container).append(t.footer.element)}t.footer.createButton=function(){if(t.buttons&&t.buttons.length>0){$(t.buttons).each(function(e,a){var r=null;var n=a.type?" "+a.type:"";var o=a.cls?a.cls:"btn btn-info"+n;var i=null;switch(a.type){case"back":r=a.label?a.label:"上一步";i=function(e){var r=a.callback?a.callback:null;t.back(r)};break;case"forward":r=a.label?a.label:"下一步";i=function(e){var r=a.callback?a.callback:null;t.forward(r)};break;case"confirm":r=a.label?a.label:"确定";i=function(e){if(a.callback){if(!a.callback(e,t)){return}}};break;default:r=a.label?a.label:null;i=function(e){if(a.callback){if(!a.callback(e,t)){return}}};break}base.form.button({container:t.footer.element,label:r,cls:o,clickEvent:i})})}};t.footer.check=function(e){var a=t.getStepCount();if(t.currentStep==0){$(t.footer.element).find(".back").addClass("disabled");$(t.footer.element).find(".back").hide();$(t.footer.element).find(".forward").removeClass("disabled");$(t.footer.element).find(".forward").show();$(t.footer.element).find(".confirm").addClass("disabled");$(t.footer.element).find(".confirm").hide()}else if(t.currentStep==a-1){$(t.footer.element).find(".back").removeClass("disabled");$(t.footer.element).find(".back").show();$(t.footer.element).find(".forward").addClass("disabled");$(t.footer.element).find(".forward").hide();$(t.footer.element).find(".confirm").removeClass("disabled");$(t.footer.element).find(".confirm").show()}else{$(t.footer.element).find(".back").removeClass("disabled");$(t.footer.element).find(".back").show();$(t.footer.element).find(".forward").removeClass("disabled");$(t.footer.element).find(".forward").show();$(t.footer.element).find(".confirm").addClass("disabled");$(t.footer.element).find(".confirm").hide()}};t.footer.createButton();t.footer.check()};t.create();return t};base.pull=function(e){var t={};t.container=e.container?e.container:null;t.pull=null;t.width=e.width?e.width:7;t.height=e.height?e.height:50;t.bg=e.bg?e.bg:"#fff";t.show=e.show?e.show:true;t.callback=e.callback?e.callback:null;t.target=e.target?e.target:null;t.animate=e.animate?e.animate:true;t.create=function(){t.pull=document.createElement("i");$(t.pull).css("float","left");$(t.pull).css("width",t.width);$(t.pull).css("height",t.height);$(t.pull).css("background-color",t.bg);$(t.pull).css("position","absolute");$(t.pull).css("text-align","center");$(t.pull).css("cursor","pointer");$(t.pull).css("font-size","12px");$(t.pull).css("padding-top",t.height/4+2);$(t.pull).css("border-bottom","1px solid #bbb");$(t.pull).css("border-left","1px solid #bbb");$(t.pull).css("border-top","1px solid #bbb");t.setPosition();$(t.pull).hover(function(){$(this).css("background-color","#eee")},function(){$(this).css("background-color",t.bg)});$(t.pull).css("z-index","1000");$(".ui-article").append(t.pull);t.toggle();$(t.pull).on("click",function(){t.show=!t.show;t.toggle()});$(window).on("resize",function(){t.setPosition()})};t.setPosition=function(){$(t.pull).css("top",$(t.container).height()/2-t.height/2+"px");$(t.pull).css("left",10-t.width)};t.toggle=function(){if($(t.container).length>0){if(t.show){$(t.pull).html("<i class='fa fa-caret-left'></i>");if(t.target){if(t.animate){$(t.target).animate({left:$(t.container).outerWidth()})}else{$(t.target).css("left",$(t.container).outerWidth())}}$(t.container).show()}else{$(t.pull).html("<i class='fa fa-caret-right'></i>");if(t.target){if(t.animate){$(t.target).animate({left:0})}else{$(t.target).css("left",0)}}$(t.container).hide()}if(t.callback){t.callback(t)}}};t.create();return t};base.msg=function(e){var t={};t.content=e.content?e.content:"";t.position=e.position?e.position:"rightBottom";t.label=e.label?e.label:"消息";t.create=function(){t.createHeader();t.crreateBody()};t.createHeader=function(){};t.crreateBody=function(){};t.create();return t};base.getUrlParam=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)");var a=window.location.search.substr(1).match(t);if(a!=null)return unescape(a[2]);return null};base.cookie=function(e){var t={};t.path=e.path?e.path:"/";t.name=e.name?e.name:null;t.value=e.value?e.value:null;t.days=e.days?e.days:null;t.option={};if(t.days){t.option.expires=t.days}if(t.path){t.option.path=t.path}t.create=function(){if(!t.name){return}t.setCookie()};t.setCookie=function(){$.cookie(t.name,t.value,t.option)};t.getCookie=function(e){$.cookie(t.name)};t.create()};base.treeTable=function(e){var t={};t.setting=e.setting?e.setting:null;t.container=e.container?e.container:null;t.create=function(){require(["treeTable"],function(){$(t.container).removeClass("treetable");$(t.container).treetable(t.setting)})};t.create()};base.getDate=function(e){if(!e){e=(new Date).format("yyyy-MM-dd HH:mm:ss")}var t=null;var a=null;var r=null;var n=0;var o=0;var i=0;var l=null;var s=null;var c=e.split(" ");if(c.length>0){l=c[0].split("-");if(l[0]){t=l[0]}if(l[1]){a=l[1]-1}if(l[2]){r=l[2]}}if(c.length==2){s=c[1].split(":");if(s[0]){n=s[0]}if(s[1]){o=s[1]}if(s[2]){i=s[2]}}return new Date(t,a,r,n,o,i)};base.schedule=function(e){var t={};t.data=e.data?e.data:null;t.container=e.container?e.container:$("body");t.dateDat=[];t.callback=e.callback?e.callback:null;t.option={header:{left:"prev,next,today",center:"title",right:"month,agendaWeek,agendaDay"},buttonText:{today:"跳转到当天"},editable:true,events:null};t.create=function(){require(["schedule"],function(){t.analyzeData(t.data);console.log(t.dateDat);t.option.events=t.dateDat;$(t.container).fullCalendar(t.option);if(t.callback){t.callback(t)}})};t.analyzeData=function(){$(t.data).each(function(e,a){var r={};for(var n in a){switch(n){case"start":case"end":r[n]=base.getDate(a[n]);break;default:r[n]=a[n];break}}t.dateDat.push(r)})};t.create()};base.xmlHttpRequest=function(){var e;try{e=new XMLHttpRequest}catch(t){try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}}return e};return base});